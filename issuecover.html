<!doctype html>
<html lang="en">

  <head>
    <title>IMWT Tests</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- CSS loaders -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/style1.css" media="none" id="cssstyle1">
    <link rel="stylesheet" href="css/style2.css" media="none" id="cssstyle2">
    <link rel="stylesheet" href="css/style3.css" media="none" id="cssstyle3">
    <link rel="stylesheet" href="css/style4.css" media="none" id="cssstyle4">

    <!-- Load jQuery -->
    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Load our JS Library -->
    <script language="javascript" src="js/llll.js"></script>

  </head>


  <body>

    <div class="container-fluid"> <!-- MAIN CONTAINER -->

      <!-- TOP BAR -->
      <div id="topBar"></div> <!-- A jQuery function loads content inside this div -->


      <!-- HOMEPAGE ROW -->
      <div class="row align-items-start">
        <div class="col">
          <div align="center">
            <br/><br/>
            <p>
              Issue Cover<br/>
              <span class="metaTitle">Number: </span><span id="issueN"></span><br/>
              <span class="metaTitle">Topic: </span><span id="issueTopic"></span><br/>
              <span class="metaTitle">Editor: </span><span id="issueEditor"></span><br/>
              <span class="metaTitle">Date: </span><span id="issueDate"></span><br/>
              <br/>
              In this number<br/>
              <span class="artTitle"></span><span id="artN1"></span><br/>
              <span class="artTitle"></span><span id="artN2"></span><br/>
              <span class="artTitle"></span><span id="artN3"></span><br/>
              <br/>
              <div id="openIssue"></div>
            </p>
            <br/><br/>
          </div>
        </div>
      </div>

      <!-- FOOTER -->
      <div id="footerBar"></div>

    </div>


    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script type="text/javascript">
      //var issuesDet = JSON.parse(fs.readFileSync("issuesDb.json"));

      const urlParams = new URLSearchParams(window.location.search);
      const issueNumber = urlParams.get('number');
      console.log(issueNumber);

      // Adds one link to the menu for each issue contained in the issuesDb.json file
      $.getJSON('./issuesDb.json', function(objson){
                //console.log(objson.topic);
                for (const jsonissue of objson.issues) {

                  if (jsonissue.number==issueNumber) {

                    $("#issueN").append(jsonissue.number);
                    $("#issueTopic").append(jsonissue.topic);
                    $("#issueEditor").append(jsonissue.editor);
                    $("#issueDate").append(jsonissue.date);
                    $("#artN1").append(jsonissue.art1);
                    $("#artN2").append(jsonissue.art2);
                    $("#artN3").append(jsonissue.art3);
                    $("#openIssue").append('<a href="issue.html?number=' + issueNumber + '">Enter Magazine</a>');
                  }

                }
            }).fail(function(){
                console.log("An error has occurredz.");
            });
    </script>



  </body>

<!-- Script Loaders-->


</html>
